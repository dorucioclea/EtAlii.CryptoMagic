@page "/settings"

@namespace EtAlii.BinanceMagic.Service

@inject IJSRuntime _jsRuntime;
@inject ApplicationContext _applicationContext;

<Validations @ref="_validations" Mode="ValidationMode.Auto" ValidateOnLoad="false" EditContext="@_editContext">
<Row>
    <Column ColumnSize="ColumnSize.IsFull.OnMobile.IsHalf.OnTablet">
        <Card Margin="Margin.Is4">
            <CardHeader>
                <CardTitle>General settings</CardTitle>
            </CardHeader>
                <CardBody>

                    <Validation Validator="@ValidationRule.IsNotEmpty">
                        <Field ColumnSize="ColumnSize.IsHalf.OnTablet.IsFull.OnMobile">
                            <FieldLabel>Binance API key</FieldLabel>
                            <TextEdit 
                                Placeholder="API key" 
                                Autofocus="true"
                                @bind-Text="@_model.BinanceApiKey">
                                <Feedback>
                                    <ValidationError>Enter Binance API key.</ValidationError>
                                </Feedback>                            
                            </TextEdit>
                        </Field>
                    </Validation>

                    <Validation Validator="@ValidationRule.IsNotEmpty">
                        <Field ColumnSize="ColumnSize.IsHalf.OnTablet.IsFull.OnMobile">
                            <FieldLabel>Binance secret key</FieldLabel>
                            <TextEdit 
                                Placeholder="Secret key" 
                                @bind-Text="@_model.BinanceSecretKey">
                                <Feedback>
                                    <ValidationError>Enter Binance secret key.</ValidationError>
                                </Feedback>                            
                            </TextEdit>
                        </Field>
                    </Validation>

                    <Validation Validator="@ValidationRule.IsNotEmpty">
                        <Field ColumnSize="ColumnSize.IsHalf.OnTablet.IsFull.OnMobile">
                            <FieldLabel>Reference symbol</FieldLabel>
                            <TextEdit 
                                Placeholder="Symbol" 
                                @bind-Text="@_model.ReferenceSymbol">
                                <Feedback>
                                    <ValidationError>Enter reference symbol.</ValidationError>
                                </Feedback>                            
                            </TextEdit>
                        </Field>
                    </Validation>

                    <Field ColumnSize="ColumnSize.IsHalf.OnTablet.IsHalf.OnMobile">
                        <Button Color="Color.Primary" Clicked="@Submit">Save</Button>
                    </Field>
                </CardBody>
            </Card>
        </Column>
    </Row>
</Validations>
